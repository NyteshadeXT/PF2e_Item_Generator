/* ================================
   Pathfinder 2e Remaster – CSS Kit
   ================================ */

/* ---------- Palette & Tokens ---------- */
:root{
  /* Parchment theme */
  --pf-bg:#fffdf8;
  --pf-panel:#ffffff;
  --pf-text:#2a2623;
  --pf-muted:#6b5f4a;

  /* PF red + gold */
  --pf-primary:#7b1d1d;
  --pf-primary-700:#5d1414;
  --pf-accent:#c9a86a;
  --pf-accent-700:#a5864f;

  /* Lines & table tints */
  --pf-border:#e6d9b6;
  --pf-row-even:#fbf6ea;
  --pf-row-odd:#fffdf8;
  --pf-row-hover:#f2ead8;
  --pf-table-head:#efe6d3;

  /* Offsets */
  --sticky-offset: 0px; /* adjust if you add a fixed top bar */
}

/* Optional dark mode (commented for now)
@media (prefers-color-scheme: dark){
  :root{
    --pf-bg:#2c2520; --pf-panel:#352b23; --pf-text:#f2e9dd; --pf-muted:#d2c4a8;
    --pf-primary:#c14949; --pf-primary-700:#9d3838;
    --pf-accent:#e0c07b; --pf-accent-700:#bd9e5b;
    --pf-border:#4f4030; --pf-row-even:#3a2f26; --pf-row-odd:#342a22; --pf-row-hover:#41352a;
    --pf-table-head:#3f342a;
  }
}
*/

/* ---------- Base ---------- */
html, body{
  background: var(--pf-bg);
  color: var(--pf-text);
  font-family: "Inter", system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
}

html { scroll-behavior: smooth; }
section[id]{ scroll-margin-top: 72px; } /* keeps anchors from hiding under the header */

a { color: var(--pf-primary-700); text-decoration: none; }
a:hover, a:focus-visible { color: var(--pf-primary); text-decoration: underline; }

/* ---------- App Frame ---------- */
.pf-app{
  max-width: 1200px;
  margin: 18px auto 48px;
  padding: 0 16px;
}

.pf-card{
  background: var(--pf-panel);
  border: 1px solid var(--pf-border);
  border-radius: 10px;
  box-shadow: 0 1px 0 rgba(0,0,0,0.03);
  overflow: hidden;
}

/* Section header strip */
.pf-section__header{
  background: linear-gradient(180deg, var(--pf-primary), var(--pf-primary-700));
  color: #fff;
  padding: 10px 14px;
  position: relative;
  font-weight: 700;
  letter-spacing: 0.2px;
}
.pf-section__header::after{
  content: "";
  display: block;
  height: 3px;
  background: linear-gradient(90deg, var(--pf-accent), var(--pf-accent-700));
}

/* Section meta line */
.pf-meta{
  color: var(--pf-muted);
  font-size: 0.95rem;
  padding: 10px 14px 0 14px;
}

/* ---------- Tables ---------- */
.pf-table{
  width: 100%;
  border-collapse: collapse;
  font-size: 0.95rem;
}

/* Horizontal scroll wrapper for narrow viewports */
.pf-table-wrap{
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
}

/* Sticky, readable table header */
.pf-table thead th{
  text-align: left;
  font-weight: 700;
  padding: 10px 12px;
  background: var(--pf-table-head);
  color: var(--pf-text);
  border-bottom: 2px solid var(--pf-border);

  letter-spacing: .2px;
  text-transform: uppercase;    /* remove if you prefer sentence case */
  font-size: .85rem;

  position: sticky;
  top: var(--sticky-offset);
  z-index: 2;
  box-shadow: 0 1px 0 rgba(0,0,0,.04);
  background-clip: padding-box; /* avoids artifacts with border-collapse */
}

/* Table body */
.pf-table td{
  padding: 8px 12px;
  vertical-align: top;
  border-bottom: 1px solid var(--pf-border);
}

/* Zebra rows + hover */
.pf-table.zebra tbody tr:nth-child(odd){ background: var(--pf-row-odd); }
.pf-table.zebra tbody tr:nth-child(even){ background: var(--pf-row-even); }
.pf-table tbody tr:hover{ background: var(--pf-row-hover); }

/* Numeric columns: Level (2), Price (4), Quantity (5) */
.pf-table td:nth-child(2),
.pf-table td:nth-child(4),
.pf-table td:nth-child(5),
.pf-table th:nth-child(2),
.pf-table th:nth-child(4),
.pf-table th:nth-child(5){
  text-align: right;
}

/* Tabular numerals + no wrapping for numeric cells */
.pf-table th, .pf-table td{
  font-variant-numeric: tabular-nums;
  font-feature-settings: "tnum" 1;
}
.pf-table td:nth-child(2),
.pf-table td:nth-child(4),
.pf-table td:nth-child(5){
  white-space: nowrap;
}

/* If sticky header shadow is clipped by the card, unclip the content wrapper */
.pf-card .p-12{ overflow: visible; }

/* ---------- Badges & Chips ---------- */
.badge{
  display: inline-block;
  padding: 2px 8px;
  border-radius: 999px;
  font-size: 0.75rem;
  line-height: 1.2;
  border: 1px solid rgba(0,0,0,0.06);
}

.badge.critical{
  background:#fff1f1;
  border-color:#e6b3b3;
  color: var(--pf-primary);
  font-weight: 600;
}

.badge.adjusted{
  background: var(--pf-accent);
  color: #2b210f;              /* dark text on gold */
  border-color: var(--pf-accent-700);
  font-weight: 700;
}

.badge.thirdparty {
  background: #f9e0a3;    /* parchment gold */
  border-color: #d4b464;
  color: #5a3d00;
  font-weight: 700;
}

.rarity-chip{ font-weight: 600; }
.rarity-chip.common   { background: #e9e4da; color: #413a31; }
.rarity-chip.uncommon { background: #f2e3bf; color: #5a4516; border-color: #e5c97a; }
.rarity-chip.rare     { background: #d8e6ff; color: #173a6b; border-color: #97b8f0; }
.rarity-chip.unique   { background: #ead8ff; color: #4a2a7b; border-color: #c1a3ec; }

/* Optional: table header pill label */
.table-title{ display: inline-flex; align-items: center; gap: 8px; }
.table-title .pill{
  background: var(--pf-accent);
  color: #2b210f;
  padding: 2px 8px;
  border-radius: 6px;
  font-size: 0.75rem;
  font-weight: 700;
}

/* ---------- Page Header Banner ---------- */
.pf-page-header{
  background: linear-gradient(180deg, var(--pf-primary), var(--pf-primary-700));
  color: #fff;
  border: 1px solid var(--pf-border);
  border-radius: 12px;
  box-shadow: 0 2px 0 rgba(0,0,0,.04);
  overflow: hidden;
}
.pf-page-header::after{
  content:"";
  display:block;
  height:4px;
  background: linear-gradient(90deg, var(--pf-accent), var(--pf-accent-700));
}
.pf-page-header__inner{
  display:flex;
  align-items:flex-end;
  justify-content:space-between;
  gap:16px;
  padding: 14px 16px 10px;
  flex-wrap: wrap;
}
.pf-kicker{
  display:inline-block;
  font-weight:700;
  font-size:.8rem;
  letter-spacing:.3px;
  opacity:.95;
}
.pf-page-title h1{
  margin:4px 0 6px;
  font-size: clamp(1.4rem, 1.6vw + 1rem, 2.2rem);
  letter-spacing:.2px;
  line-height:1.1;
}
.pf-subtitle{
  margin: 0;
  color: rgba(255,255,255,.92);
  display:flex;
  flex-wrap:wrap;
  gap:8px;
}

/* Chips + quick nav */
.pf-chip{
  display:inline-flex; align-items:center; gap:6px;
  padding: 4px 10px; border-radius: 999px; font-size: .8rem; font-weight: 600;
  background: rgba(255,255,255,.12); border: 1px solid rgba(255,255,255,.18);
  backdrop-filter: saturate(110%);
}
.pf-page-actions{ display:flex; gap:8px; flex-wrap:wrap; }
.pf-link-chip{
  display:inline-flex; align-items:center; padding: 4px 10px; border-radius: 999px;
  font-weight:700; font-size:.8rem; text-decoration:none; color:#2b210f;
  background: var(--pf-accent); border: 1px solid var(--pf-accent-700);
}
.pf-link-chip:hover, .pf-link-chip:focus-visible{
  filter: brightness(0.95);
  text-decoration: underline;
}

/* ---------- Empty State ---------- */
.empty{
  color: var(--pf-muted);
  background: var(--pf-row-even);
  border: 1px dashed var(--pf-border);
  border-radius: 8px;
  padding: 10px 12px;
  display: inline-block;
}

/* ---------- Utilities ---------- */
.mt-8 { margin-top: 8px; }
.mt-12{ margin-top: 12px; }
.mt-16{ margin-top: 16px; }
.p-12 { padding: 12px; }

/* Compact table density (opt-in) */
.pf-table.compact td{ padding:6px 10px; }
.pf-table.compact thead th{ padding:8px 10px; font-size:.8rem; }

/* ---------- Forms (Index page) ---------- */
.pf-form-grid{
  display: grid;
  grid-template-columns: repeat(2, minmax(260px, 1fr));
  gap: 16px 20px;
}
@media (max-width: 720px){
  .pf-form-grid{ grid-template-columns: 1fr; }
}

.pf-field{ display:flex; flex-direction: column; gap: 6px; }
.pf-label{ font-weight: 700; color: var(--pf-text); }
.pf-help{ color: var(--pf-muted); font-size: .85rem; }

/* Bigger selects / inputs */
.pf-select,
.pf-input{
  width: 100%;
  background: var(--pf-panel);
  color: var(--pf-text);
  border: 1px solid var(--pf-border);
  border-radius: 10px;
  padding: 10px 12px;
  line-height: 1.3;
  outline: none;
}
.pf-select:focus, .pf-input:focus{
  border-color: var(--pf-accent-700);
  box-shadow: 0 0 0 2px rgba(201,168,106,.25);
}

/* Large control height */
.pf-select-lg{ min-height: 44px; font-size: 1rem; }
.pf-input.pf-select-lg{ height: 44px; }

/* Buttons */
.pf-actions{ display:flex; gap: 10px; margin-top: 6px; }
.pf-btn{
  appearance: none; border: 1px solid var(--pf-border);
  border-radius: 10px; padding: 10px 14px; font-weight: 700; cursor: pointer;
  background: var(--pf-panel); color: var(--pf-text);
}
.pf-btn:hover{ filter: brightness(.98); }
.pf-btn-primary{
  background: linear-gradient(180deg, var(--pf-primary), var(--pf-primary-700));
  color: #fff; border-color: var(--pf-primary-700);
}
.pf-btn-primary:hover{ filter: brightness(1.03); }
.pf-btn-ghost{ background: transparent; }

/* ---------- Print ---------- */
@media print{
  :root{
    --pf-bg:#ffffff;
    --pf-panel:#ffffff;
    --pf-table-head:#f2f2f2;
    --pf-border:#cccccc;
    --pf-row-even:#fafafa;
    --pf-row-odd:#ffffff;
  }
  .pf-card{ box-shadow: none; break-inside: avoid; page-break-inside: avoid; margin-bottom: 12px; }
  .pf-page-actions{ display: none !important; }
}

/* prevent grid children from forcing overflow */
.pf-field{ min-width: 0; }

/* ensure padding/border are included in width calc */
.pf-select, .pf-input{ box-sizing: border-box; }

/* make the form grid auto-wrap from 2 cols to 1 when space is tight */
.pf-form-grid{
  grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
}

.badge.material{
  background:#cdeee2;
  border-color:#96d4c0;
  color:#0f3c33;
  font-weight:700;
}


/* Name cell hook (keeps selectors narrow to the first column) */
.pf-table td.name-cell { }

/* Accordion styles — apply ONLY on spellbook rows */
.mi-row.is-spellbook .name-cell details.sb-acc > summary {
  list-style: none;
  cursor: pointer;
}
.mi-row.is-spellbook .name-cell details.sb-acc > summary::-webkit-details-marker { display: none; }
.mi-row.is-spellbook .name-cell details.sb-acc > summary::before {
  content: "▸";
  display: inline-block;
  margin-right: 6px;
  transform: translateY(-1px);
}
.mi-row.is-spellbook .name-cell details[open].sb-acc > summary::before { content: "▾"; }

/* Contents emitted by services/spellbooks.py */
.mi-row.is-spellbook .name-cell .sb-contents { margin: 8px 0 0 18px; }
.mi-row.is-spellbook .name-cell .sb-rank { margin: 2px 0; }

/* Keep your existing rarity chip tweak on spellbooks */
.mi-row.is-spellbook .badge.rarity-chip { margin-left: 6px; }

.badge.thirdparty {
  background: #ffe6cc;
  border-color: #e6b38c;
  color: #7b3e00;
  font-weight: 600;
}

